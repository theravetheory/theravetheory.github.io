(this["webpackJsonpweb-radio"]=this["webpackJsonpweb-radio"]||[]).push([[0],{125:function(e,t,n){"use strict";n.r(t);var r=n(8),a=n.n(r),s=n(28),c=n.n(s),i=(n(48),n(12)),o=n(2),l=n.n(o),u=n(7),p=n.p+"static/media/trt_logo.fa883c72.png",h=(n(50),n(51),n(52),n(0)),m=n(1),d=n(4),j=n(5),b=n(16),f=n.n(b),v=n.p+"static/media/play.a5f78ec3.svg",O=n(3);function x(e){var t=e.onPlayerClick;return Object(O.jsx)("button",{className:"player__button",onClick:t,children:Object(O.jsx)("img",{src:v,alt:"play button"})})}var y=n.p+"static/media/pause.84a3aa53.svg";function g(e){var t=e.onPlayerClick;return Object(O.jsx)("button",{className:"player__button",onClick:t,children:Object(O.jsx)("img",{src:y,alt:"pause button"})})}var w=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).handlePlayerClick=function(){r.state.playing?(r.setState({playing:!1}),f()("#stream-player")[0].pause()):(r.setState({playing:!0}),f()("#stream-player")[0].play())},r.state={playing:!1},r}return Object(m.a)(n,[{key:"render",value:function(){return Object(O.jsx)(O.Fragment,{children:this.state.playing?Object(O.jsx)(g,{onPlayerClick:this.handlePlayerClick}):Object(O.jsx)(x,{onPlayerClick:this.handlePlayerClick})})}}]),n}(r.Component);var C=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var r;return Object(h.a)(this,n),(r=t.call(this,e)).state={status:null,error:null,serverName:null,serverDescription:null,serverGenre:null},r}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch(this.props.streamurl+"/stream").then((function(t){e.setState({status:t.status}),console.log("stream",e.state)})),f.a.getJSON({url:this.props.streamurl+"/status-json.xsl",success:function(t,n,r){console.log(r),t.icestats.source&&e.setState({serverName:t.icestats.source.server_name,serverDescription:t.icestats.source.server_description,serverGenre:t.icestats.source.genre})},error:function(e){console.log("there was an error")}})}},{key:"render",value:function(){var e,t,n,r=this.state.status;return 200===r?(e=this.state.serverName,t=this.state.serverDescription,n=this.state.serverGenre,Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("audio",{controls:!0,id:"stream-player",children:Object(O.jsx)("source",{src:"https://theravetheory.evan-savage.com:8000/stream",type:"audio/mpeg"})}),Object(O.jsx)("div",{className:"scroll-left",children:Object(O.jsxs)("p",{children:["Now playing: ",e," - ",t," [",n,"]"]})}),Object(O.jsx)("div",{className:"player-controls",children:Object(O.jsx)(w,{isplaying:!1})})]})):404===r?Object(O.jsx)("div",{className:"scroll-left",children:Object(O.jsxs)("p",{children:["Donate to ",Object(O.jsx)("a",{href:"mailto:theravetheory0@gmail.com",children:"theravetheory"})]})}):Object(O.jsx)("div",{className:"scroll-left",children:Object(O.jsx)("p",{children:" Loading... "})})}}]),n}(r.Component),k=n(14),N=n(40),S=n.n(N),M=(a.a.Component,function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=new k.Scene,t=new k.PerspectiveCamera(40,1),n=new k.WebGLRenderer({antialias:!0,alpha:!0});n.setSize(90,90),this.mount.appendChild(n.domElement);var r=new k.BoxGeometry(10,9,10),a=new k.MeshBasicMaterial,s=new k.Mesh(r,a);(new k.TextureLoader).load(this.props.imagetexture,(function(e){s.material.map=e,s.material.needsUpdate=!0,s.scale.set(1,e.image.height/e.image.width,1)}),(function(e){console.log(e.loaded/e.total*100+"% loaded")}),(function(e){console.log("An error happened"+e)})),e.add(s),t.position.z=20,t.position.y=2;!function r(){requestAnimationFrame(r),s.rotation.y+=.01,n.render(e,t)}()}},{key:"render",value:function(){var e=this;return Object(O.jsx)("div",{className:"three-cube",ref:function(t){e.mount=t}})}}]),n}(r.Component)),_=(n(59),n(60),n(62),n(64),n(65),n(66),n(67),n(21));n.p;function E(e){return Math.floor(e[0]+Math.random()*Math.floor(e[1]-e[0]))}var G=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return Object(O.jsxs)(_.Scene,{background:{color:"black"},gridhelper:{size:1e3,divisions:300,colorGrid:"#04ed00",colorCenterLine:"#feef49"},children:[function(e){for(var t=[],n=[-200,200],r=[10,100],a=[-200,200],s=[0,360],c=0;c<e;c++){var i=Math.floor(3*Math.random());console.log(i),t.push(Object(O.jsx)(_.Entity,{geometry:{primitive:"box"},material:{src:p,opacity:.99,shader:"flat"},scale:{x:7,y:5,z:7},position:{x:E(n),y:E(r),z:E(a)},animation:{property:"rotation",dur:E([2e3,1e4]),loop:"true",dir:"alternate",to:{x:0===i?E(s):0,y:1===i?E(s):0,z:2===i?E(s):0},easing:"linear"}}))}return t}(30),Object(O.jsx)(_.Entity,{primitive:"a-camera","wasd-controls-enabled":"true",position:{x:0,y:5,z:0},fence:{width:100,depth:100},animation:{}})]})}}]),n}(a.a.Component),F=n(41),L=n.n(F),P=["++chao2.mp3","10 Gabber For Milfs.mp3","2crush.mp3","A (Alphabetical).mp3","Abraxas (ft. Catastrophi).mp3","Angel_City.mp3","Blood Ocean.mp3","coated in ice.mp3","Composition Booklet - Weed For The Innocence - 01 Alcohol.mp3","Computer.mp3","DEVILMAN.mp3","Duty Is The Greatest Gift.mp3","f_3$h BYTE.mp3","Faith.mp3","Floater.mp3","Flux.mp3","GUNK SHOT __.mp3","Ignorant Existence (Luci Carcass X Lucy Ghost).mp3","lost in time, like tears in the shower.mp3","nachmancore.mp3","Penguin s2s (july 2020).mp3","rumaniasa_flying_colors_v1.mp3","S.O.S.mp3","Shy x Radish Prod. o0o _ djfun.mp3","Sin Bound.mp3","SwagGod (prod.Inverse x SMG).mp3","TAKE IN THE ONE.mp3","The Void (feat. HKND).mp3","Ugly Sceptre.mp3","VVVV.mp3"].map((function(e){return{url:"https://raw.githubusercontent.com/theravetheory/theravetheory.github.io/winamp/src/music/playlist/"+e}}));var T=function(e){var t=e.onClose,n=e.onMinimize,a=Object(r.useRef)(null),s=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=a.current;if(e)return s.current=new L.a({initialTracks:P}),s.current.renderWhenReady(e).then((function(){e.appendChild(document.querySelector("#webamp"))})),function(){s.current.dispose(),s.current=null}}),[]),Object(r.useEffect)((function(){s.current&&(s.current.onClose(t),s.current.onMinimize(n))})),Object(O.jsx)("div",{id:"webamp-container",ref:a})},U=n(29),A=(n.p,new U.a({id:"theravetheoryradio-rducr"}));function D(e){var t=e.user,n=e.username,r=e.setUser,a=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.currentUser.logOut();case 2:r(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"login-wrapper",children:[Object(O.jsxs)("h1",{children:["Logged in with anonymous id: ",Object(O.jsx)("span",{children:t.id})," and username"," ",Object(O.jsx)("span",{children:n})]}),Object(O.jsx)("button",{onClick:a,children:"Log Out"})]})}function I(e){var t=e.setUser,n=e.setUserName,r=function(){var e=Object(u.a)(l.a.mark((function e(){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(f()("#login-name input").val()),n(f()("#login-name input").val()),e.next=4,A.logIn(U.b.anonymous());case 4:r=e.sent,t(r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"login-wrapper",children:[Object(O.jsxs)("label",{id:"login-name",children:[" ","Name: ",Object(O.jsx)("input",{type:"text"})]}),Object(O.jsx)("button",{onClick:r,children:"Log In"})]})}var z=function(){var e=a.a.useState(A.currentUser),t=Object(i.a)(e,2),n=t[0],s=t[1],c=a.a.useState(),o=Object(i.a)(c,2),h=o[0],m=o[1],d=Object(r.useState)(null),j=Object(i.a)(d,2),b=j[0],f=j[1];Object(r.useEffect)((function(){v().then((function(e){return f(e.express)})).catch((function(e){return console.log(e)}))}));var v=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/express_backend");case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,200===t.status){e.next=8;break}throw Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"app-wrapper",children:[Object(O.jsx)(T,{}),Object(O.jsx)(G,{}),Object(O.jsx)("h1",{children:b}),Object(O.jsx)("div",{className:"nav-wrapper",children:Object(O.jsxs)("nav",{className:"navbar",children:[Object(O.jsx)("div",{className:"icon-container",children:Object(O.jsx)(M,{imagetexture:p})}),Object(O.jsx)(C,{streamurl:"https://theravetheory.evan-savage.com:8000"})]})}),Object(O.jsx)("div",{children:Object(O.jsx)("header",{className:"App-header",children:n?Object(O.jsx)(D,{user:n,username:h,setUser:s}):Object(O.jsx)(I,{setUser:s,setUserName:m})})})]})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,126)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};c.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(z,{})}),document.getElementById("root")),B()},48:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){}},[[125,1,2]]]);
//# sourceMappingURL=main.7e39f12d.chunk.js.map